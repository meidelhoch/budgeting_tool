{% extends "base.html" %}

{% block title %}Spending{% endblock %}

{% block content %}
<h1>Spending</h1>
<div class="legend">
  <div class="legend-item"><div class="legend-color cat-grocery"></div> Grocery</div>
  <div class="legend-item"><div class="legend-color cat-dining"></div> Dining</div>
  <div class="legend-item"><div class="legend-color cat-shopping"></div> Shopping</div>
  <div class="legend-item"><div class="legend-color cat-transportation"></div> Transportation</div>
  <div class="legend-item"><div class="legend-color cat-housing"></div> Housing</div>
  <div class="legend-item"><div class="legend-color cat-entertainment"></div> Entertainment</div>
  <div class="legend-item"><div class="legend-color cat-travel"></div> Travel</div>
  <div class="legend-item"><div class="legend-color cat-medical"></div> Medical</div>
  <div class="legend-item"><div class="legend-color cat-wellness"></div> Wellness</div>
  <div class="legend-item"><div class="legend-color cat-gifts"></div> Gifts</div>
  <div class="legend-item"><div class="legend-color cat-other"></div> Other</div>
</div>
<table class="table table-bordered">
    <thead class="table-light">
        <tr>
            {% for key in transactions[0].keys() %}
                {% if key == "net_amount" %}
                    <th>Amount Spent</th>
                {% else %}
                <th>{{ key.capitalize() }}</th>
                {% endif %}
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for transaction in transactions %}
        <tr class="{{ categories.get(transaction.category) }}">
            {% for key, value in transaction.items() %}
                <td class="{{ categories.get(transaction.category) }}" style="margin: 0px;">
                    {% if key == "amount" %}
                        {{ value | money }}
                    {% elif key == "net_amount" %}
                        {{ value | money }}
                    {% elif key == "date" %}
                        {{ value.strftime('%m/%d/%Y') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
            {% endfor %}
        </tr>
    {% endfor %}
</tbody>
</table>
{% endblock %}